#syntax=bergkvist/includeimage
FROM debian
ARG REPO_LOCATION=docker.lacviet.vn
ARG TAG=1
ARG USER=nttlong
INCLUDE ${REPO_LOCATION}/${USER}/debian-py-39:${TAG}
#FROM ${REPO_LOCATION}/${USER}/debian-py-framework-core:${TAG}
RUN apt-get install git -y && mkdir -p /app
COPY ./../compact.py /app/compact.py
COPY ./../cy_consumers /app/cy_consumers
COPY ./../cy_utils /app/cy_utils
COPY ./../cy_web /app/cy_web
COPY ./../cy_xdoc /app/cy_xdoc
COPY ./../cyx /app/cyx
COPY ./../resource /app/resource
COPY ./../config.yml /app/config.yml


#INCLUDE nttlong/component:1
#INCLUDE nttlong/debian-py-395:1
RUN python3 /app/compact.py /app/cy_utils
RUN python3 /app/compact.py /app/cy_web
RUN python3 /app/compact.py /app/cy_xdoc
RUN python3 /app/compact.py /app/cyx
COPY ./../docker-debian/verify.py /app/docker-build/verify.py
WORKDIR /app
RUN python3 /app/docker-build/verify.py py395_core core_framework app_framework


