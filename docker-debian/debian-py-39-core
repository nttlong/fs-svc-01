ARG REPO_LOCATION=docker.lacviet.vn
ARG TAG=1
ARG USER=nttlong
FROM ${REPO_LOCATION}/${USER}/debian-py-39:${TAG}


COPY ./../compact.py /app/compact.py
COPY ./../elasticsearch /app/elasticsearch
RUN python3 /app/compact.py /app/elasticsearch
COPY ./../bson /app/bson
RUN python3 /app/compact.py /app/bson
COPY ./../gridfs /app/gridfs
RUN python3 /app/compact.py /app/gridfs
COPY ./../pymongo /app/pymongo
RUN python3 /app/compact.py /app/pymongo

COPY ./../docker-debian/debian-py-core-39.req.txt /app/debian-py-core-39.req.txt
RUN pip install -r /app/debian-py-core-39.req.txt  --no-cache-dir && pip uninstall pymongo -y
COPY ./../docker-debian/verify.py /app/docker-debian/verify.py
WORKDIR /app
RUN python3 /app/docker-debian/verify.py py39_core
